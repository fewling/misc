# Misc

## 1. Get Unique Device Identifier

- Tried [device_info_plus](https://pub.dev/packages/device_info_plus) package. However, due to privacy policy, device MAC address are not available anymore.
- Using [android_id](https://pub.dev/packages/android_id) package.
- Caution: The value may change if a **factory reset** is performed on the device or if an **APK signing key change** (stated in [package readme](https://pub.dev/packages/android_id#important)).

## 2. Read File in Internal Storage

- Tried [path_provider](https://pub.dev/packages/path_provider) which provides access to app data directories that are not easily visible to users.

- Tried [android_path_provider](https://pub.dev/packages/android_path_provider), which provides convenient access to common directories in Android internal storage (e.g. Documents/Downloads/DCIM/Media/Music/Movies). However, this does not provides measure to access custom directory.

- Using Flutter built-in `Directory` or `File` API.

## 3. Permission Handling for File IO

- Direct `File` API call can check the existence of certain file, but reading requires proper permissions.

- Using [permission_handler](https://pub.dev/packages/permission_handler), check the permissions stated in `android/app/src/main/AndroidManifest.xml`.

- Seems `<uses-permission android:name="android.permission.MANAGE_EXTERNAL_STORAGE"/>` is the essential part to obtain file content.

## 4. Calculate Hash

- To authorize user to use the app, app will first obtain the key(hash) from the file in device storage.

- The hash convention would be a hash from a fixed string and the unique device identifier (see #1).

- Hash is generated by `sha512()` provided by [crypto](https://pub.dev/packages/crypto) package.
